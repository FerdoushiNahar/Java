###  Adding a Key-Value Pair to a Map in Java

In Java, the `put(key, value)` method is used to add a key-value pair to a `Map`. 

- **If the key does not exist**, the method simply adds the key-value pair to the map.  
- **If the key already exists**, the method replaces the old value with the new one and returns the previous value.  
- **If it's a new key**, `put()` returns `null`.  

#### **Enhancement in Java SE 8: `putIfAbsent()`**
Java SE 8 introduced `putIfAbsent(key, value)`, which adds a key-value pair **only if the key is not already present or is associated with a `null` value**. 

- This is useful for **handling faulty `null` values** in maps, preventing `NullPointerException` caused by auto-unboxing `null` integers.

#### **Example Issue with Null Values**
The following example demonstrates the problem with `null` values in a `Map<String, Integer>`:

```java
Map<String, Integer> map = new HashMap<>();
map.put("one", 1);
map.put("two", null);
map.put("three", 3);
map.put("four", null);
map.put("five", 5);

for (int value : map.values()) {
    System.out.println("value = " + value);
}
```
- This will cause a **`NullPointerException`** when attempting to auto-unbox `null` into an `int`.

#### **Fixing the Issue with `putIfAbsent()`**
The following loop replaces all `null` values with `-1`, preventing `NullPointerException`:

```java
for (String key : map.keySet()) {
    map.putIfAbsent(key, -1);
}
```

#### **Resulting Output (No Null Values)**
```
value = -1
value = 1
value = -1
value = 3
value = 5
```
By using `putIfAbsent()`, null values are replaced, ensuring safer iteration without unexpected errors.

The reason why `"four"` appears first in the output is because **`HashMap` does not maintain insertion order**. Instead, it stores keys based on their **hash codes**, which determine their positions in the internal data structure (a hash table).

### **How HashMap Works:**
1. **`HashMap` stores key-value pairs in buckets** based on the **hash value** of the keys.
2. The order of elements when printing the map depends on how the **hash function distributes the keys**.
3. Since **the hash function may place keys in different positions**, iterating over a `HashMap` may return elements in an **unpredictable order**.

### **Why Does `"four"` Appear First?**
- The exact ordering **depends on the hash values of the keys** and how Java's `HashMap` organizes them internally.
- The ordering can **change between runs or different Java versions**.
- If you use a **different JDK version**, you might get a different order.

### **How to Maintain Insertion Order?**
If you need the order in which you inserted the elements, use **`LinkedHashMap`** instead of `HashMap`:
```java
import java.util.LinkedHashMap;
import java.util.Map;

public class Main {
    public static void main(String[] args) {
        Map<String, Integer> map = new LinkedHashMap<>();

        map.put("one", 1);
        map.put("two", null);
        map.put("three", 3);
        map.put("four", null);
        map.put("five", 5);

        for (String key : map.keySet()) {
            map.putIfAbsent(key, -1);
        }

        System.out.println(map);
    }
}
```

### **Output with `LinkedHashMap` (Maintains Order):**
```
{one=1, two=-1, three=3, four=-1, five=5}
```

So, if maintaining order is important, use `LinkedHashMap` instead of `HashMap`. 
